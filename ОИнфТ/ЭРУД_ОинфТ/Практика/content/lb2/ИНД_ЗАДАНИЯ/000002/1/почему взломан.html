<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>почему взломан</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
body {
  margin: 5px 5px 5px 5px;
  background-color: #ffffff;
}
/* ========== Text Styles ========== */
hr { color: #000000}
body, table, span.rvts0 /* Normal text */
{
 font-size: 10pt;
 font-family: 'Arial', 'Helvetica', sans-serif;
 font-style: normal;
 font-weight: normal;
 color: #000000;
 text-decoration: none;
}
span.rvts1 /* Heading */
{
 font-weight: bold;
 color: #0000ff;
}
span.rvts2 /* Subheading */
{
 font-weight: bold;
 color: #000080;
}
span.rvts3 /* Keywords */
{
 font-style: italic;
 color: #800000;
}
a.rvts4, span.rvts4 /* Jump 1 */
{
 color: #008000;
 text-decoration: underline;
}
a.rvts5, span.rvts5 /* Jump 2 */
{
 color: #008000;
 text-decoration: underline;
}
span.rvts6
{
 font-size: 12pt;
 font-weight: bold;
 color: #227cb5;
}
span.rvts7
{
 font-size: 11pt;
}
span.rvts8
{
 font-size: 11pt;
 font-weight: bold;
 color: #227cb5;
}
span.rvts9
{
 font-family: 'Verdana', 'Geneva', sans-serif;
 color: #000000;
}
span.rvts10
{
 font-family: 'Verdana', 'Geneva', sans-serif;
 font-style: italic;
 font-weight: bold;
 color: #000000;
}
a.rvts11, span.rvts11
{
 font-weight: bold;
 color: #227cb5;
 text-decoration: none;
}
span.rvts12
{
 font-size: 12pt;
 font-family: 'Times New Roman', 'Times', serif;
}
/* ========== Para Styles ========== */
p,ul,ol /* Paragraph Style */
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 0px 0px 0px 0px;
}
.rvps1 /* Centered */
{
 text-align: center;
}
.rvps2
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 0px 0px 7px 10px;
}
.rvps3
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps4
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps5
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps6
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps7
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps8
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps9
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps10
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps11
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps12
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps13
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps14
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps15
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps16
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps17
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps18
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps19
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps20
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps21
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps22
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps23
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps24
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps25
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps26
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps27
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
.rvps28
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 13px 0px 7px 10px;
}
.rvps29
{
 text-align: justify;
 margin: 0px 0px 0px 10px;
}
--></style>
</head>
<body>
<h3    class=rvps2><span   class=rvts0><span   class=rvts6>ПОЧЕМУ   БЫЛ
ВЗЛОМАН         AMAZON.COM,         YAHOO.COM,         EBAY.COM        И
ДРУГИЕ?</span></span></h3> 
<h4     class=rvps3><span     class=rvts0><span     class=rvts7>Лукацкий
А.В.</span></span></h4> 
<h4     class=rvps4><span     class=rvts0><span     class=rvts8>Введение
</span></span></h4> 
<p   class=rvps5><span  class=rvts9>7  февраля  в  10.20  утра  по
Тихоокеанскому       времени       пользователи
портала       Yahoo       заметили       существенное
замедление    в   предоставляемых   услугах   -
электронной      почте,      новостях      и     т.д.
Пользователи,  привыкшие к тому, что среднее
время        загрузки        одной        Web-страницы
составляло     не     более     1.7    секунд    были
раздражены     шестисекундными    задержками.
Дальше    стало   еще   хуже.   В   10.30   утра   уже
половина   всех   пользователей,   пытавшихся
получить    доступ   к   серверу   Yahoo   в   ответ
получало     только    сообщение    об    ошибке.
Анализ      проблемы     показал,     что     отказ
серверов     Yahoo     вызван     огромным    числом
небольших   пакетов,  которые  изменялись  от
простых     диагностических     сообщений    до
запросов   о   получении   HTML-страниц.   Лавина
этих   пакетов   обрушилась   на  Yahoo  сразу  из
нескольких    точек    Internet.   Специалисты   Yahoo
насчитали  не  менее 50 таких точек. В 11.00 утра
менее   10  процентов  всех  пользователей  Yahoo
смогли   получить   доступ  к  ресурсам  этого
портала.  И  даже  тем,  кому  все-таки удалось
"достучаться"  до сервера, приходилось ждать
не   менее   20   секунд   пока  придет  ответ  на
сделанный     запрос.     В    13.15    все    запросы
пользователей        были       направлены       на
неатакованные        сервера        и        в       15.00
функционирование        Yahoo        вернулось       в
нормальное русло [1]. </span></p> 
<p  class=rvps6><span  class=rvts9>Yahoo  был  первым  из  серии
широко       известных      серверов,      которые
подверглись      массированным     атакам     во
вторую  неделю февраля. Следующими жертвами
стали    сервера    Buy.com    (вторник,    утро),   eBay
(вторник,  вечер),  CNN.com (вторник, вечер), Amazon.com
(вторник,   вечер),   ZDNet.com   (среда,   утро),  E*Trade
(среда,   утро),  Datek  (среда,  утро),  Excite  (среда,
утро).   Время,   в   течение   которого   данные
сервера  были недоступны для пользователей,
колебалось  от  30  минут до нескольких часов.
</span></p> 
<p    class=rvps7><span    class=rvts9>Второй    жертвой   стал
сервер  Buy.com,  который  подвергся  атаке в 10.50,
во  вторник.  Шторм  пакетов, направленный на
этот  узел  в 8 раз превысил допустимый объем
трафика  и  достиг  отметки  в  800  Мбит/сек  [2].
Аналогичные   результаты   наблюдались   и   у
других   компаний.  Все  это  стало  возможным
благодаря  т.н.  распределенным  атакам  типа
"отказ   в   обслуживании"   (Distributed  Denial  of  Service
Attacks,  DdoS).  Впервые  о  них заговорили еще в 1998
году,   когда   Naval  Surface  Warfare  Center  опубликовал
отчет,     посвященный    анализу    нескольких
случаев   применения   распределенных   атак.
Второй        раз        пристальное        внимание
распределенным  атакам было уделено в конце
прошлого  года. Было опубликовано несколько
документов    и   предупреждений,   в   которых
говорилось,  что опасность применения таких
атак    очень    велика.    Однако   практически
никто  не  прислушался  к этим заявлениям и в
начале     февраля     грянул     гром.    Десятки
компаний       подверглись       распределенным
атакам,   в   т.ч.   зафиксированы   атаки   и  на
российские   компании,  использующие  Internet  в
своей   работе.   Детально,  но  не  вдаваясь  в
технические        подробности,       рассмотрим
технологию реализации таких атак. </span></p> 
<h4     class=rvps8><span     class=rvts0><span     class=rvts8>Механизм
реализации</span></span></h4> 
<p    class=rvps9><span    class=rvts9>Все   они   основаны   на
"классических"      атаках     типа     "отказ     в
обслуживании"   (Denial   of   Service),   точнее   на  их
подмножестве,     известном     как     Flood-    или
Storm-атаки       (указанные       термины       можно
перевести    как    "шторм",    "наводнение"   или
"лавина").  Смысл  данных  атак  заключается  в
посылке   большого   количества   пакетов   на
заданный  узел  сети  (цель  атаки),  что может
привести  к  выведению  этого  узла  из строя,
поскольку     он     "захлебнется"     в     лавине
посылаемых       пакетов       и       не       сможет
обрабатывать       запросы       авторизованных
пользователей.  По такому принципу работают
атаки  SYN-Flood, Smurf, UDP Flood, Targa3 и т.д. Однако в том
случае,  если пропускная способность канала
до     цели     атаки     превышает     пропускную
способность   атакующего   или  целевой  узел
некорректно  сконфигурирован,  то  к "успеху"
такая    атака    не    приведет.   В   случае   же
распределенной    атаки   ситуация   коренным
образом  меняется.  Атака  происходит  уже не
из  одной  точки  Internet, а сразу из нескольких,
что  приводит к резкому возрастанию трафика
и    выведению    атакуемого   узла   из   строя.
</span></p> 
<p             class=rvps10><span             class=rvts9>Реализуется
распределенная   атака  в  два  этапа.  Первый
этап   заключается   в   поиске  в  Internet  узлов,
которые   можно   было  бы  задействовать  для
реализации     распределенной     атаки.     Чем
больше    будет    найдено   таких   узлов,   тем
эффективнее  будет  атака.  "Изюминка"  в  том,
что  в Internet таких узлов миллионы. Проводимые
регулярно    исследования    показывают,   что
многие  компании не следят за безопасностью
своих   узлов,  имеющих  выход  в  Internet.  Эти-то
узлы    и    становятся    излюбленным    местом
злоумышленников,  выбирающих  их  в качестве
"базового  лагеря"  для дальнейшей атаки. Эти
узлы   могут   относиться  не  только  к  сетям
университетов  и  государственных структур,
как    это    было   в   случае   с   февральскими
атаками,  но  и  Internet-провайдерам, финансовым
и     страховым     компаниям     и     т.д.    После
нахождения   уязвимых  узлов,  злоумышленник
осуществляет  установку на них компонентов,
реализующих       атаку.      Такая      установка
становится    возможной   благодаря   "слабым"
местам,  которые и использует злоумышленник
для своих "черных дел". </span></p> 
<p  class=rvps11><span  class=rvts9>Второй этап заключается
в    посылке    большого    числа    пакетов    на
атакуемый  узел.  Особенность  этого  этапа в
том,  что  посылка пакетов осуществляется не
с  узла, за которым "сидит" злоумышленник, а с
скомпрометированной  им системы, на которой
установлены            специальные           агенты,
реализующие          распределенную         атаку.
Существует      два     типа     таких     агентов:
"мастера"     и     "демоны"     (или    "клиенты"    и
"сервера").          Иногда         компьютеры         с
установленными          агентами          называют
компьютеры-"зомби". Злоумышленник
управляет     небольшим    числом    "мастеров",
которые      в      свою      очередь      командуют
"демонами".   Казалось   бы,   что   проблема  не
стоит   и   выеденного   яйца.  Вместо  обычной
одноуровневой    структуры    обычной    атаки
(злоумышленник  -&gt;  атакуемый) используется
трехуровневая  структура (злоумышленник -&gt;
мастер  -&gt;  демон  -&gt;  атакуемый). Что мешает
пройти   по   этой  цепочке  и  определить  все
участвующие   в   атаке   узлы?   Но  в  том-то  и
состоит   особенность  распределенных  атак,
что так просто этого не сделать. </span></p> 
<p        class=rvps12><span        class=rvts9>Обнаружение        и
блокирование      одного      или      нескольких
"мастеров"    или    "демонов"    не   приводит   к
окончанию  действия атаки, поскольку каждый
"демон"   действует  независимо  от  других  и,
получив      соответствующие      команды      от
"мастера",   уже   не   нуждается  в  дальнейшем
поддержании     связи    с    ним.    Т.е.    "демон"
работает      автономно,      что     существенно
затрудняет    обнаружение    и    блокирование
всех  демонов, участвующих в распределенной
атаке.    Кроме    того,    при   атаку   возможна
подмена    адреса    отправителя    враждебных
пакетов,         что        также        отрицательно
сказывается    на    эффективности   контрмер.
Злоумышленник  использует  десятки  и  сотни
незащищенных      узлов      для      координации
нападения.    Эти   узлы   могут   принадлежать
различным    провайдерам    и    находиться    в
различных    странах   и   даже   на   различных
материках,     что    существенно    затрудняет
обнаружение злоумышленника,
координирующего      атаку.      Каждый      узел,
участвующей  в  скоординированной  атаке, не
позволяет  получить  информацию  о том, кто и
откуда  инициировал  нападение.  Кроме  того,
на     этих     узлах     нет     полного     списка,
участвующих     в     атаке,     узлов.     Поэтому
выявление    одного    узла    не    приводит    к
превращению всей атаки. </span></p> 
<p    class=rvps13><img    width=579   height=527   alt=""   hspace=1   vspace=1
src="img1.png"></p> 
<h4      class=rvps14><span     class=rvts0><span     class=rvts8>Примеры
реализации </span></span></h4> 
<p    class=rvps15><span    class=rvts9>В    настоящий    момент
известно  4 основных инструмента реализации
распределенных  атак  (Distributed  Attack  Tools)  -  trin00,
Tribe  Flood  Network  (TFN),  Tribe Flood Network 2000 (TFN2K) и Stacheldraht.
</span></p> 
<p class=rvps16><span class=rvts10>Trin00 </span></p>
<p   class=rvps17><span   class=rvts9>Trin00   -   одна   из  первых
распространенных  распределенных атак типа
"отказ  в  обслуживании".  В качестве базы для
атаки  выбранной  жертвы  используются  узлы
под  управлением  операционных  систем  Linux и
Solaris.  Управление  "демонами"  осуществляется
по     протоколу    TCP    Взаимодействие    между
компонентами   trin00   возможно   только   после
предъявления  соответствующего  пароля, что
не  позволяет  в  случае  обнаружения  агента
trin00   "перехватить"   управление  на  себя  или
дать  команду  на  прекращение  атаки. Адреса
отправителя  пакетов  trin00 не изменяются, что
позволяет   относительно   легко  обнаружить
"демонов".  Для  атаки  используется протокол
UDP (атака UDP Bomb). </span></p> 
<p class=rvps18><span class=rvts10>Tribe Flood Network (TFN)</span></p>
<p   class=rvps19><span   class=rvts9>TFN   -   второе  известное
средство    для   реализации   распределенных
атак.    В   отличие   от   trin00   оно   использует
протокол      ICMP      для     управления     своими
компонентами.  Спектр  реализуемых  атак Denial
of  Service в TFN шире, чем в trin00. Это и SYN Flood, и UDP Bomb,
и   ICMP   Flood   и,  наконец,  Smurf.  Для  затруднения
обнаружения      источников     атаки     адреса
"демонов"  могут быть изменены. Компоненты TFN
работают   под   управлением   ОС   Linux   и  Solaris.
</span></p> 
<p class=rvps20><span class=rvts10>Tribe Flood Network 2000 (TFN2K) </span></p>
<p   class=rvps21><span   class=rvts9>TFN2K  -  это  "продвинутая"
версия    TFN,   которая   появилась   в   декабре
прошлого     года.     В     отличие    от    своего
прототипа,   она   использует   алгоритм  CAST-256
для   шифрования   управляющих  команд  между
всеми  своими  компонентами.  Для управления
могут   использоваться  протоколы  TCP,  UDP  или
ICMP.   Для   введения  в  заблуждение  TFN2K  может
создавать  пакеты,  направленные  не  на цель
атаки     (т.е.     "decoy    packets").    Компоненты    TFN2K
работают  под  управлением  ОС Linux, Solaris и Windows
NT [3] </span></p> 
<p class=rvps22><span class=rvts10>Stacheldraht</span></p>
<p   class=rvps23><span   class=rvts9>Stacheldraht  -  это  средство,
объединяющее  в  себе  возможности  TFN  и  trin00.
Для    управления   "мастерами"   используется
протокол  TCP,  а  для управления "демонами" - TCP
или   ICMP.  Основные  отличия  stacheldraht  от  своих
"коллег"        в       возможности       удаленного
обновления   своих   компонент  более  новыми
версиями    и    в    возможности    обнаружения
фильтрации   согласно   RFC   2267,   затрудняющей
подмену     адресов    сетевых    пакетов.    Для
шифрования             управляющих             команд
используется    протокол    Blowfish.   Компоненты
stacheldraht   работают  под  управлением  ОС  Linux  и
Solaris. </span></p> 
<h4   class=rvps24><span   class=rvts0><span  class=rvts8>Механизмы  и
меры защиты</span></span></h4> 
<p       class=rvps25><span      class=rvts9>Различные      фирмы,
работающие  на  ниве безопасности выпускают
обновления                своих               продуктов,
предназначенные    для    обнаружения    таких
атак.   Одной  из  таких  фирм  была  Internet  Security
Systems,                Inc.               (</span><a               class=rvts11
href="http://www.iss.net">http://www.iss.net</a><span class=rvts9>),
которые  обновила сразу все семейство своих
продуктов    SAFEsuite,    состоящее    из    системы
обнаружения    атак   RealSecure,   систем   анализа
защищенности  Internet  Scanner, System Scanner и Database Scanner,
а  также системы поддержки принятия решений
в   области  безопасности  SAFEsuite  Decisions.  Фирма
Internet  Security  Systems  выпустила  обновления своих
продуктов  еще  в декабре 1999 года, за 2 месяца
до  нашумевших  атак  на  Amazon.com, Buy.com и других.
</span></p> 
<p       class=rvps26><span       class=rvts9>Однако      еще      до
приобретения  специализированных  защитных
средств  можно  реализовать ряд мер, которые
помогут  предотвратить или снизить ущерб от
распределенных  атак  [4]. Во-первых, обновите
все       свое       программное       обеспечение,
установив    Service    Pack'и,    patch'и   и   hotfix'ы.   Эта
достаточно     простая     мера    не    позволит
злоумышленникам   установить   на  ваши  узлы
"демоны"   и  "мастера",  используя  уязвимости
вашего программного обеспечения. </span></p> 
<p  class=rvps27><span  class=rvts9>К  другим мерам защитным
мерам    можно    отнести:    </span><br><span   class=rvts9>1.
Определите       персонал,      который      будет
отвечать      или      с     которым     необходимо
связаться         в         случае        обнаружения
распределенной      атаки      или     в     случае
подозрения,           что          ваша          система
скомпрометирована      и     может     содержать
"мастера"   иди   "демона".   В  качестве  такого
персонала     могут     выступать    сотрудники
отдела        защиты        информации,       отдела
автоматизации     или     ваш    Internet-провайдер.
</span><br><span  class=rvts9>2.  Знакомьтесь  с  регулярно
публикуемыми     бюллетенями,    выпускаемыми
организациями,     работающими     в     области
информационной   безопасности  (например,  ISS
Security   Alert).   Это   позволит  вам  быть  в  курсе
новых    уязвимостей    и    методов    действия
злоумышленников.    Для    облегчения   поиска
уязвимостей    в    вашей    сети    используйте
автоматизированные       средства       анализа
защищенности,  например,  системы Internet Scanner и
System    Scanner    компании    Internet   Security   Systems.   Эти
системы    позволяют    обнаружить   более   1200
различных  уязвимостей, в т.ч. и приводящих к
реализации   распределенных  атак.  </span><br><span
class=rvts9>3.           Своевременно           устраняйте
уязвимости     в    программном    обеспечении,
используемом  в вашей сети. Это позволит вам
снизить  риск  компрометации  ваших систем и
не  позволит  злоумышленникам установить на
ваши    узлы    "мастера"    или    "демонов"    для
реализации   распределенных  атак.  </span><br><span
class=rvts9>4.  Для  идентификации  распределенных
атак     на     ваши     системы,    а    также    для
идентификации      "мастеров"      и     "демонов",
установленных   в   вашей   сети,  используйте
средства     обнаружения     атак    и    анализа
защищенности.  Например, систему RealSecure и уже
названную  систему  Internet  Scanner  компании Internet
Security   Systems.   </span><br><span   class=rvts9>5.   Используйте
межсетевые   экраны   и   защитные   механизмы
маршрутизаторов      и      другого      сетевого
оборудования.     Если    это    и    не    поможет
обнаружить  источник  распределенной атаки,
то     поможет     обнаружить     сам     факт    ее
реализации  и  своевременно среагировать на
нее.  </span><br><span class=rvts9>6. Используйте средства
балансировки      нагрузки      и      управления
пропускной  способностью  сетевого трафика.
</span><br><span       class=rvts9>7.       Рассматривайте      и
своевременно     реагируйте     на    сообщения
ваших     пользователей     о    подозрительных
событиях     в    системе.    </span><br><span    class=rvts9>8.
Разработайте  план обеспечения непрерывной
работы  и  восстановления,  который позволит
в  случае  нарушения функционирования ваших
систем              вследствие              реализации
распределенных   атак   быстро   вернуться   к
нормальной    работе.   </span><br><span   class=rvts9>9.   По
возможности     создайте     резервный    канал
доступа     в     Internet.     В    случае    нарушения
функционирования  вашего  основного канала,
этот  канал позволит быстро переключится на
резервный,  не  нарушив  принятую технологию
обработки    информации.   </span><br><span   class=rvts9>10.
Обучите  ваш  персонал в специализированных
организациях,      занимающихся     повышением
квалификации         в         области        сетевой
безопасности.  В  России  такой организацией
можно     назвать     авторизованный    учебный
центр  (Authorized Training Center, ATC) компании Internet Security
Systems,  организованный при НИП "Информзащита".
</span></p> 
<h4      class=rvps28><span      class=rvts0><span      class=rvts8>Список
литературы</span></span></h4> 
<p  class=rvps29><span  class=rvts9>[1]  J.  Sandberg, T. Hayden, G. Vistica, D.
Lorch.   Hunting  the  Hackers.  Netweek,  February  21,  2000  </span><br><span
class=rvts9>[2]          А.          Лукацкий.         Анатомия
распределенной  атаки. PCWeek/RE, №5, 2000 </span><br><span
class=rvts9>[3]  ISS  Security  Alert.  Denial of Service Attack using the TFN2K
and  Stacheldraht  programs.  February  9, 2000 </span><br><span class=rvts9>[4]
Results  of the Distributed-Systems Intruder Tools Workshop. CERT® Coordination
Center.  Software Engineering Institute. Carnegie Mellon University. December 7,
1999. </span></p> 
<p><span class=rvts12><br></span></p>
</body></html>
